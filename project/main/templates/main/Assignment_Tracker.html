{% extends 'main/base.html'%}

{%block title%}
Assingment Tracker
{%endblock%}
<style>

</style>
{%block content%}
<div class="tracker-add-assignment">
        <form action="" >
            {%csrf_token%}

            <input type="text" id="assignmentTitle" placeholder="Assignment Title" required>
            <input type="date" id="assignmentDueDate" placeholder="Due Date" required>
            <input type="text" id="classNameInput" placeholder="Select or add a class" list="classList" required>
            <select id="assignmentType" required>
                <option value="">Select Type</option>
                <option value="Assesment">Assesment</option>
                <option value="Assignment">Assignment</option>
            </select>

            <button type="submit">Add Assignment</button>
        </form>
    <!-- List of Assignments -->
    <div class="tracker-assignment-list">
        <h2>Your Assignments</h2>
        <div class="tracker-sort-dropdown">
            <label for="sortOptions">Sort by: </label>
            <select id="sortOptions" onchange="sortAssignments()">
                <option value="dueDate">Due Date</option>
                <option value="class">Class</option>
                <option value="type">Type</option>
                <option value="title">Title</option>
            </select>
        </div>
    </div>
    <table>
        <thead>
            <tr>
                <th>Title</th>
                <th>Due Date</th>
                <th>Class</th>
                <th>Type</th>
                <th>Complete</th>
                <th>Remove</th>
            </tr>
        </thead>
        <tbody id="assignments">
            {%for event in calendarEvents%}
            <tr>
                <td>{{event.title}}</td>
                <td>{{event.start}}</td>
                <td>PlaceHolder</td>
                <td>{{event.eventType}}</td>
                <td class="tracker-complete-cell">
                    <input class="tracker-complete-checkbox" type="checkbox">
                </td>
                <td>
                    <button>Remove</button>
                </td>
            </tr>
            {%endfor%}
            <!-- Dynamically added assignments will go here -->
        </tbody>
    </table>


<script>
    const classColors = {};
    // Function to generate a random light color
    function getRandomLightColor() {
        const r = Math.floor(Math.random() * 256);
        const g = Math.floor(Math.random() * 256);
        const b = Math.floor(Math.random() * 256);
        // Lighten the color
        return `rgba(${r}, ${g}, ${b}, 0.3)`;
    }
    function sortAssignments(){
        let sortOption = document.getElementById('sortOptions').value
        console.log(sortOption)
        if(sortOption == "type"){
            window.location.href = window.location.href + "eventType" 
        }else if (sortOption = "dueDate"){
            window.location.href = window.location.href + "start"
        }else if (sortOption = "title"){
            window.location.href = window.location.href + "title"
        }
    }
   
</script>
{%endblock%}

